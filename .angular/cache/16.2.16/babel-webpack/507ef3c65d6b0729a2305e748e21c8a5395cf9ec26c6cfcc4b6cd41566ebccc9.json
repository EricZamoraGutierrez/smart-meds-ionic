{"ast":null,"code":"import _asyncToGenerator from \"c:/Users/benji/OneDrive/Documents/smartmeds project/smart-meds-ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Validators } from '@angular/forms';\nimport { getFirestore } from '@angular/fire/firestore';\nimport { register } from 'swiper/element';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../services/prescription-storage.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/fire/firestore\";\nimport * as i6 from \"../services/user.service\";\nimport * as i7 from \"@angular/common\";\nfunction AgregarPage_ion_select_option_66_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-select-option\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const hour_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", hour_r1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(hour_r1 + 1);\n  }\n}\nregister();\nlet AgregarPage = /*#__PURE__*/(() => {\n  var _AgregarPage;\n  class AgregarPage {\n    constructor(navCtrl, formBuilder, prescriptionStorage, router, firestore, userService) {\n      this.navCtrl = navCtrl;\n      this.formBuilder = formBuilder;\n      this.prescriptionStorage = prescriptionStorage;\n      this.router = router;\n      this.firestore = firestore;\n      this.userService = userService;\n      this.formDataGeneral = [];\n      this.formDataTiempo = [];\n      this.formDataOtros = [];\n      this.db = getFirestore();\n      //User ID\n      this.userId = \"\";\n      //Medicine ID\n      this.medId = \"\";\n      //userData = {\n      //name: \"\",\n      //email: \"\",\n      //}\n      this.expanded = false;\n      this.expanded2 = false;\n      this.expanded3 = false;\n      this.expanded4 = false;\n      this.hours = Array.from({\n        length: 24\n      }, (_, i) => i);\n      this.expanded = true, this.expanded2 = true, this.expanded3 = true, this.expanded4 = true, this.myFormGeneral = this.formBuilder.group({\n        name: ['', Validators.required],\n        dosis: ['', Validators.required],\n        medida: ['', Validators.required],\n        presenForm: ['', Validators.required]\n      });\n      this.myFormTiempo = this.formBuilder.group({\n        selectedHour: ['', Validators.required],\n        inicio: ['', Validators.required],\n        fin: ['', Validators.required]\n      });\n      this.myFormOtros = this.formBuilder.group({\n        peso: ['', Validators.required],\n        repisaForm: ['', Validators.required],\n        contra: ['', Validators.required],\n        comentario: ['', Validators.required]\n      });\n    }\n    goBack() {\n      this.navCtrl.back();\n    }\n    redirectToHomePage() {\n      setTimeout(() => {\n        this.router.navigate(['/tabs/tab1']); // Redirecciona a la página \"home\"\n      }, 2000);\n    }\n    ngOnInit() {\n      this.getID();\n    }\n    getID() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const id = yield _this.userService.getUser();\n        _this.userId = id;\n        console.log(_this.userId);\n      })();\n    }\n    submitForm() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        if (_this2.myFormGeneral.valid && _this2.myFormTiempo.valid && _this2.myFormOtros.valid) {\n          _this2.formDataGeneral.push(_this2.myFormGeneral.value), _this2.formDataTiempo.push(_this2.myFormTiempo.value), _this2.formDataOtros.push(_this2.myFormOtros.value),\n          // Reiniciar el formulario\n          _this2.myFormGeneral.reset();\n          _this2.myFormTiempo.reset();\n          _this2.myFormOtros.reset();\n          _this2.saveMeds();\n        }\n      })();\n    }\n    isFormValidGeneral() {\n      return this.myFormGeneral.valid;\n    }\n    isFormValidTiempo() {\n      return this.myFormTiempo.valid;\n    }\n    isFormValidOtros() {\n      return this.myFormOtros.valid;\n    }\n    toggleCard() {\n      this.expanded = !this.expanded;\n    }\n    toggleCard2() {\n      this.expanded2 = !this.expanded2;\n    }\n    toggleCard3() {\n      this.expanded3 = !this.expanded3;\n    }\n    toggleCard4() {\n      this.expanded4 = !this.expanded4;\n    }\n    //Aqui empieza mi desvergue\n    savePrescription() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        yield _this3.prescriptionStorage.addPrescription(_this3.formDataTiempo[0].selectedHour, _this3.formDataTiempo[0].inicio, _this3.formDataTiempo[0].fin, _this3.userId, _this3.medId).then(res => {\n          console.log(res);\n        });\n      })();\n    }\n    saveOtherDetails() {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        yield _this4.prescriptionStorage.addMedDetails(_this4.formDataOtros[0].peso, _this4.formDataOtros[0].repisaForm, _this4.formDataOtros[0].contra, _this4.formDataOtros[0].comentario, _this4.medId).then(res => {\n          console.log(res);\n        });\n      })();\n    }\n    saveMeds() {\n      var _this5 = this;\n      return _asyncToGenerator(function* () {\n        yield _this5.prescriptionStorage.addMeds(_this5.formDataGeneral[0].name, _this5.formDataGeneral[0].dosis, _this5.formDataGeneral[0].medida, _this5.formDataGeneral[0].presenForm).then(response => {\n          console.log(response);\n          _this5.medId = response.id;\n          console.log(_this5.medId);\n          _this5.savePrescription();\n          _this5.saveOtherDetails();\n        });\n      })();\n    }\n  }\n  _AgregarPage = AgregarPage;\n  _AgregarPage.ɵfac = function AgregarPage_Factory(t) {\n    return new (t || _AgregarPage)(i0.ɵɵdirectiveInject(i1.NavController), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.PrescriptionStorageService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.Firestore), i0.ɵɵdirectiveInject(i6.UserService));\n  };\n  _AgregarPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _AgregarPage,\n    selectors: [[\"app-agregar\"]],\n    decls: 104,\n    vars: 3,\n    consts: [[\"slot\", \"start\", 3, \"click\"], [\"slot\", \"icon-only\", \"name\", \"chevron-back\", 1, \"chevron-icon\"], [1, \"titulo\"], [1, \"nombre\"], [\"type\", \"text\", \"fill\", \"solid\", \"Placeholder\", \"Medicamento\", \"helperText\", \"Ejemplo: Paracetamol\"], [1, \"dosis\"], [\"type\", \"number\", \"fill\", \"solid\", \"Placeholder\", \"Dosis\", \"helperText\", \"Ejemplo: 1 pastilla\"], [1, \"medida\"], [\"fill\", \"solid\", \"justify\", \"space-between\", \"placeholder\", \"Seleccione\"], [1, \"presentacion\"], [\"type\", \"text\", \"fill\", \"solid\", \"placeholder\", \"Presentacion\", \"helperText\", \"Ejemplo: Caja\"], [\"fill\", \"solid\", \"justify\", \"spacwe-between\", \"placeholder\", \"Seleccione\"], [3, \"formGroup\"], [1, \"tiempo\"], [\"id\", \"selectedHour\", \"formControlName\", \"selectedHour\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"inicio\", \"formControlName\", \"inicio\", \"type\", \"date\", \"fill\", \"solid\", \"placeholder\", \"Fecha\", \"helperText\", \"Ejemplo: 01/01/2021\"], [\"id\", \"fin\", \"formControlName\", \"fin\", \"type\", \"date\", \"fill\", \"solid\", \"placeholder\", \"Fecha\", \"helperText\", \"Ejemplo: 01/01/2021\"], [1, \"consumo\"], [\"id\", \"peso\", \"formControlName\", \"peso\", \"type\", \"number\", \"fill\", \"solid\", \"placeholder\", \"Gramos\", \"helperText\", \"Ejemplo: 10 gramos\"], [\"id\", \"repisaForm\", \"formControlName\", \"repisaForm\", \"placeholder\", \"Seleccione\"], [\"id\", \"contra\", \"formControlName\", \"contra\", \"type\", \"text\", \"fill\", \"solid\", \"helperText\", \"Ejemplo: No tomar a x hora\"], [\"id\", \"comentario\", \"formControlName\", \"comentario\", \"type\", \"text\", \"fill\", \"solid\", \"helperText\", \"Ejemplo: Tomar despues de comer\"], [3, \"value\"]],\n    template: function AgregarPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-toolbar\")(1, \"ion-buttons\", 0);\n        i0.ɵɵlistener(\"click\", function AgregarPage_Template_ion_buttons_click_1_listener() {\n          return ctx.goBack();\n        });\n        i0.ɵɵelement(2, \"ion-icon\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"h2\");\n        i0.ɵɵtext(5, \"Nueva receta\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"ion-button\");\n        i0.ɵɵtext(7, \" Guardar \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"ion-content\")(9, \"swiper-container\")(10, \"swiper-slide\")(11, \"div\", 3)(12, \"h2\");\n        i0.ɵɵtext(13, \"Datos generales\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"p\");\n        i0.ɵɵtext(15, \"Datos como nombre, dosis, caracteristicas.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"ion-item\")(17, \"h5\");\n        i0.ɵɵtext(18, \"\\u00BFCual es el nombre del medicamento?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(19, \"ion-input\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 5)(21, \"ion-item\")(22, \"h5\");\n        i0.ɵɵtext(23, \"\\u00BFCual es la dosis que se va a tomar?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(24, \"ion-input\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 7)(26, \"ion-item\")(27, \"h5\");\n        i0.ɵɵtext(28, \"Unidad de medida del medicamento\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"ion-select\", 8)(30, \"ion-select-option\");\n        i0.ɵɵtext(31, \"Miligramo(s)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"ion-select-option\");\n        i0.ɵɵtext(33, \"Gramo(s)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"ion-select-option\");\n        i0.ɵɵtext(35, \"Mililitro(s)\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(36, \"div\", 9)(37, \"ion-item\")(38, \"h5\");\n        i0.ɵɵtext(39, \"\\u00BFCual es la presentacion del medicamento?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(40, \"ion-input\", 10);\n        i0.ɵɵelementStart(41, \"ion-item\")(42, \"h5\");\n        i0.ɵɵtext(43, \"Presentacion del medicamento\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"ion-select\", 11)(45, \"ion-select-option\");\n        i0.ɵɵtext(46, \"Pastilla\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"ion-select-option\");\n        i0.ɵɵtext(48, \"Capsula\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(49, \"ion-select-option\");\n        i0.ɵɵtext(50, \"Ampolleta\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(51, \"ion-select-option\");\n        i0.ɵɵtext(52, \"Solvente\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(53, \"ion-select-option\");\n        i0.ɵɵtext(54, \"Inyeccion\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(55, \"swiper-slide\")(56, \"form\", 12)(57, \"div\", 13)(58, \"h2\");\n        i0.ɵɵtext(59, \"Tiempo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(60, \"p\");\n        i0.ɵɵtext(61, \"Datos como fecha de inicio, hora de inicio.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(62, \"ion-item\")(63, \"h5\");\n        i0.ɵɵtext(64, \"\\u00BFCada cuantas horas se va a tomar el medicamento?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(65, \"ion-select\", 14);\n        i0.ɵɵtemplate(66, AgregarPage_ion_select_option_66_Template, 2, 2, \"ion-select-option\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(67, \"ion-item\")(68, \"h5\");\n        i0.ɵɵtext(69, \"\\u00BFCual es la fecha de inicio?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(70, \"ion-input\", 16);\n        i0.ɵɵelementStart(71, \"ion-item\")(72, \"h5\");\n        i0.ɵɵtext(73, \"\\u00BFCual es la fecha de finalizacion?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(74, \"ion-input\", 17);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(75, \"swiper-slide\")(76, \"form\", 12)(77, \"div\", 18)(78, \"ion-card-title\");\n        i0.ɵɵtext(79, \"Datos de consumo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(80, \"ion-card-subtitle\");\n        i0.ɵɵtext(81, \"Datos como cantidad, unidad de medida, presentacion, precio.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(82, \"ion-item\")(83, \"h2\");\n        i0.ɵɵtext(84, \"\\u00BFCual es el peso neto del envase?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(85, \"ion-input\", 19);\n        i0.ɵɵelementStart(86, \"ion-item\")(87, \"h2\");\n        i0.ɵɵtext(88, \"\\u00BFEn qu\\u00E9 repisa del botiqu\\u00EDn estar\\u00E1 este medicamento?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(89, \"ion-select\", 20)(90, \"ion-select-option\");\n        i0.ɵɵtext(91, \"Alta\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(92, \"ion-select-option\");\n        i0.ɵɵtext(93, \"Media\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(94, \"ion-select-option\");\n        i0.ɵɵtext(95, \"Baja\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(96, \"ion-item\")(97, \"h2\");\n        i0.ɵɵtext(98, \"Contra indicaciones del medicamento\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(99, \"ion-input\", 21);\n        i0.ɵɵelementStart(100, \"ion-item\")(101, \"h2\");\n        i0.ɵɵtext(102, \"Comentarios del tratamiento\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(103, \"ion-input\", 22);\n        i0.ɵɵelementEnd()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(56);\n        i0.ɵɵproperty(\"formGroup\", ctx.myFormTiempo);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngForOf\", ctx.hours);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"formGroup\", ctx.myFormOtros);\n      }\n    },\n    dependencies: [i1.IonButton, i1.IonButtons, i1.IonCardSubtitle, i1.IonCardTitle, i1.IonContent, i1.IonIcon, i1.IonInput, i1.IonItem, i1.IonSelect, i1.IonSelectOption, i1.IonToolbar, i1.NumericValueAccessor, i1.SelectValueAccessor, i1.TextValueAccessor, i7.NgForOf, i2.ɵNgNoValidate, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName],\n    styles: [\"var[_ngcontent-%COMP%]   resource[_ngcontent-%COMP%]; (()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  {// webpackBootstrap var __webpack_modules__ = ({924: (() => {throw new Error('Module build failed (from ./node_modules/sass-loader/dist/cjs.js):nexpected \\\"{\\\".n   \\\\2577n91 \\\\2502    porn   \\\\2502      ^n   \\\\2575n  src\\\\\\\\app\\\\\\\\agregar\\\\\\\\agregar.page.scss 91:5  root stylesheet');})}); // startup // Load entry module and return exports // This entry module doesn\\\"t tell about it\\\"s top-level declarations so it can't be inlined\\nvar __webpack_exports__ = {}; __webpack_modules__[924](); resource = __webpack_exports__;})() ;{}\"]\n  });\n  return AgregarPage;\n})();\nexport { AgregarPage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}