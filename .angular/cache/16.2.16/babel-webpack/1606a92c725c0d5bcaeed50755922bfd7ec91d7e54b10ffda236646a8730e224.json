{"ast":null,"code":"import _asyncToGenerator from \"c:/Users/benji/OneDrive/Documents/smartmeds project/smart-meds-ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { getDatabase, ref } from '@angular/fire/database';\nimport { get } from 'firebase/database';\nimport { collection, query, where, getDocs } from '@angular/fire/firestore';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/firestore\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"../services/notifications.service\";\nimport * as i4 from \"@angular/common\";\nfunction Tab4Page_ion_card_content_18_ol_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ol\")(1, \"div\", 12)(2, \"ion-card\", 13)(3, \"ion-card-title\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 14);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"div\", 15);\n    i0.ɵɵelementStart(8, \"ion-card-content\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const medicine_r4 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(medicine_r4.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\"Contenido: \", medicine_r4.Detalles.peso, \" \", medicine_r4.medida, \" \", medicine_r4.presen, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(medicine_r4.Detalles.comentario);\n  }\n}\nfunction Tab4Page_ion_card_content_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card-content\");\n    i0.ɵɵtext(1, \" < Repisa \\\"Alta\\\" Supongamos que esto es un desplegable oculto \");\n    i0.ɵɵtemplate(2, Tab4Page_ion_card_content_18_ol_2_Template, 10, 5, \"ol\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.dataRepisaAlta);\n  }\n}\nfunction Tab4Page_ion_card_content_26_ol_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ol\")(1, \"div\", 16)(2, \"ion-card\", 17)(3, \"ion-card-title\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 14);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"div\", 15);\n    i0.ɵɵelementStart(8, \"ion-card-content\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const medicine_r6 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(medicine_r6.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\"Contenido: \", medicine_r6.Detalles.peso, \" \", medicine_r6.medida, \" \", medicine_r6.presen, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(medicine_r6.Detalles.comentario);\n  }\n}\nfunction Tab4Page_ion_card_content_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card-content\");\n    i0.ɵɵtext(1, \" Repisa \\\"Media\\\" \");\n    i0.ɵɵtemplate(2, Tab4Page_ion_card_content_26_ol_2_Template, 10, 5, \"ol\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.dataRepisaMedia);\n  }\n}\nfunction Tab4Page_ion_card_content_34_ol_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ol\")(1, \"div\", 18)(2, \"ion-card\", 19)(3, \"ion-card-title\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 14);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"div\", 15);\n    i0.ɵɵelementStart(8, \"ion-card-content\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const medicine_r8 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(medicine_r8.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\"Contenido: \", medicine_r8.Detalles.peso, \" \", medicine_r8.medida, \" \", medicine_r8.presen, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(medicine_r8.Detalles.comentario);\n  }\n}\nfunction Tab4Page_ion_card_content_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card-content\");\n    i0.ɵɵtext(1, \" Repisa \\\"Baja\\\" \");\n    i0.ɵɵtemplate(2, Tab4Page_ion_card_content_34_ol_2_Template, 10, 5, \"ol\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.dataRepisaBaja);\n  }\n}\nlet Tab4Page = /*#__PURE__*/(() => {\n  var _Tab4Page;\n  class Tab4Page {\n    toggleCard() {\n      this.expanded = !this.expanded;\n    }\n    toggleCard2() {\n      this.expanded2 = !this.expanded2;\n    }\n    toggleCard3() {\n      this.expanded3 = !this.expanded3;\n    }\n    constructor(firestore, navCtrl, notifications) {\n      this.firestore = firestore;\n      this.navCtrl = navCtrl;\n      this.notifications = notifications;\n      this.expanded = true;\n      this.expanded2 = true;\n      this.expanded3 = true;\n      this.db = getDatabase();\n      this.reference = ref(this.db, 'Peso');\n      this.stateRef = ref(this.db, 'Puerta');\n      this.weight = 0;\n      this.state = \"Cerrada\";\n      this.dataRepisaAlta = [];\n      this.dataRepisaBaja = [];\n      this.dataRepisaMedia = [];\n      // reads data from realtime database (medkit) every 2 seconds\n      this.readTask = setInterval(() => {\n        this.readKit();\n      }, 2000);\n    }\n    goBack() {\n      this.navCtrl.back();\n    }\n    ionViewDidEnter() {\n      this.readKit();\n      this.readMedicinesFromShelf('Alta');\n      this.readMedicinesFromShelf('Media');\n      this.readMedicinesFromShelf('Baja');\n      this.dataRepisaAlta = [];\n      this.dataRepisaBaja = [];\n      this.dataRepisaMedia = [];\n    }\n    // gets data from realtime database (medkit)\n    readKit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        yield get(_this.reference).then(snapshot => {\n          const value = snapshot.val();\n          _this.weight = value;\n        });\n        yield get(_this.stateRef).then(snapshot => {\n          const value = snapshot.val();\n          _this.state = value == 0 ? \"Cerrada\" : \"Abierta\";\n        });\n      })();\n    }\n    // notify() {\n    //   //this is a test notification\n    //   const hora = new Date().getHours()\n    //   this.notifications.scheduleTest(\"Peso en la hora: \" + hora, 1, \"Peso: \" + this.weight + \"g\")\n    // }\n    //aqui empieza el desvergue\n    readMedicinesFromShelf(shelf) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          const shelfRef = collection(_this2.firestore, 'Medicaciones');\n          const q = query(shelfRef, where('Detalles.repisa', '==', shelf));\n          const querySnapshot = yield getDocs(q);\n          querySnapshot.forEach(doc => {\n            const medicineData = doc.data();\n            switch (shelf) {\n              case 'Alta':\n                _this2.dataRepisaAlta.push(medicineData);\n                break;\n              case 'Media':\n                _this2.dataRepisaMedia.push(medicineData);\n                break;\n              case 'Baja':\n                _this2.dataRepisaBaja.push(medicineData);\n                break;\n              case \"default\":\n                break;\n            }\n          });\n        } catch (error) {\n          console.error('Error getting medicines:', error);\n        }\n      })();\n    }\n  }\n  _Tab4Page = Tab4Page;\n  _Tab4Page.ɵfac = function Tab4Page_Factory(t) {\n    return new (t || _Tab4Page)(i0.ɵɵdirectiveInject(i1.Firestore), i0.ɵɵdirectiveInject(i2.NavController), i0.ɵɵdirectiveInject(i3.NotificationsService));\n  };\n  _Tab4Page.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _Tab4Page,\n    selectors: [[\"app-tab4\"]],\n    decls: 35,\n    vars: 6,\n    consts: [[\"slot\", \"start\", 3, \"click\"], [\"name\", \"chevron-back\"], [\"slot\", \"end\"], [\"name\", \"add-outline\"], [3, \"fullscreen\"], [1, \"todo\"], [1, \"alta\"], [3, \"click\"], [4, \"ngIf\"], [1, \"media\"], [1, \"baja\"], [4, \"ngFor\", \"ngForOf\"], [1, \"repalta\"], [1, \"cardalta\"], [1, \"agrupador\"], [1, \"linea\"], [1, \"repmedia\"], [1, \"cardmedia\"], [1, \"repbaja\"], [1, \"cardbaja\"]],\n    template: function Tab4Page_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-toolbar\")(1, \"ion-buttons\", 0);\n        i0.ɵɵlistener(\"click\", function Tab4Page_Template_ion_buttons_click_1_listener() {\n          return ctx.goBack();\n        });\n        i0.ɵɵelement(2, \"ion-icon\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"h2\");\n        i0.ɵɵtext(4, \"Smart-Kit\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"ion-buttons\", 2);\n        i0.ɵɵelement(6, \"ion-icon\", 3);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"ion-content\", 4)(8, \"div\", 5)(9, \"h1\");\n        i0.ɵɵtext(10);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"div\", 6)(12, \"ion-card\")(13, \"ion-card-header\", 7);\n        i0.ɵɵlistener(\"click\", function Tab4Page_Template_ion_card_header_click_13_listener() {\n          return ctx.toggleCard();\n        });\n        i0.ɵɵelementStart(14, \"ion-card-title\");\n        i0.ɵɵtext(15, \"Datos de la repisa alta\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"ion-card-title\");\n        i0.ɵɵtext(17, \"Peso: g.\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(18, Tab4Page_ion_card_content_18_Template, 3, 1, \"ion-card-content\", 8);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(19, \"div\", 9)(20, \"ion-card\")(21, \"ion-card-header\", 7);\n        i0.ɵɵlistener(\"click\", function Tab4Page_Template_ion_card_header_click_21_listener() {\n          return ctx.toggleCard2();\n        });\n        i0.ɵɵelementStart(22, \"ion-card-title\");\n        i0.ɵɵtext(23, \"Datos de la repisa media\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"ion-card-title\");\n        i0.ɵɵtext(25, \"Peso: g.\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(26, Tab4Page_ion_card_content_26_Template, 3, 1, \"ion-card-content\", 8);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(27, \"div\", 10)(28, \"ion-card\")(29, \"ion-card-header\", 7);\n        i0.ɵɵlistener(\"click\", function Tab4Page_Template_ion_card_header_click_29_listener() {\n          return ctx.toggleCard3();\n        });\n        i0.ɵɵelementStart(30, \"ion-card-title\");\n        i0.ɵɵtext(31, \"Datos de la repisa baja \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"ion-card-title\");\n        i0.ɵɵtext(33);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(34, Tab4Page_ion_card_content_34_Template, 3, 1, \"ion-card-content\", 8);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"fullscreen\", true);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"Estado de la puerta: \", ctx.state, \"\");\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", !ctx.expanded);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", !ctx.expanded2);\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate1(\"Peso: \", ctx.weight, \" g.\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.expanded3);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i2.IonButtons, i2.IonCard, i2.IonCardContent, i2.IonCardHeader, i2.IonCardTitle, i2.IonContent, i2.IonIcon, i2.IonToolbar],\n    styles: [\"var[_ngcontent-%COMP%]   resource[_ngcontent-%COMP%]; (()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  {// webpackBootstrap var __webpack_modules__ = ({188: (() => {throw new Error('Module build failed (from ./node_modules/sass-loader/dist/cjs.js):nexpected \\\"{\\\".n    \\\\2577n174 \\\\2502      bordrn    \\\\2502          ^n    \\\\2575n  src\\\\\\\\app\\\\\\\\tab4\\\\\\\\tab4.page.scss 174:9  root stylesheet');})}); // startup // Load entry module and return exports // This entry module doesn\\\"t tell about it\\\"s top-level declarations so it can't be inlined\\nvar __webpack_exports__ = {}; __webpack_modules__[188](); resource = __webpack_exports__;})() ;{}\"]\n  });\n  return Tab4Page;\n})();\nexport { Tab4Page };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}