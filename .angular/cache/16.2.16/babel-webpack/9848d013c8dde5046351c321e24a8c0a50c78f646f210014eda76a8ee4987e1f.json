{"ast":null,"code":"import _asyncToGenerator from \"c:/Users/benji/OneDrive/Documents/smartmeds project/smart-meds-ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Validators } from '@angular/forms';\nimport { getFirestore } from '@angular/fire/firestore';\nimport { register } from 'swiper/element';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../services/prescription-storage.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/fire/firestore\";\nimport * as i6 from \"../services/user.service\";\nimport * as i7 from \"@angular/common\";\nfunction AgregarPage_ion_select_option_66_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-select-option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const hour_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", hour_r1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(hour_r1 + 1);\n  }\n}\nregister();\nlet AgregarPage = /*#__PURE__*/(() => {\n  var _AgregarPage;\n  class AgregarPage {\n    constructor(navCtrl, formBuilder, prescriptionStorage, router, firestore, userService) {\n      this.navCtrl = navCtrl;\n      this.formBuilder = formBuilder;\n      this.prescriptionStorage = prescriptionStorage;\n      this.router = router;\n      this.firestore = firestore;\n      this.userService = userService;\n      this.formDataGeneral = [];\n      this.formDataTiempo = [];\n      this.formDataOtros = [];\n      this.db = getFirestore();\n      //User ID\n      this.userId = \"\";\n      //Medicine ID\n      this.medId = \"\";\n      //userData = {\n      //name: \"\",\n      //email: \"\",\n      //}\n      this.expanded = false;\n      this.expanded2 = false;\n      this.expanded3 = false;\n      this.expanded4 = false;\n      this.hours = Array.from({\n        length: 24\n      }, (_, i) => i);\n      this.expanded = true, this.expanded2 = true, this.expanded3 = true, this.expanded4 = true, this.myFormGeneral = this.formBuilder.group({\n        name: ['', Validators.required],\n        dosis: ['', Validators.required],\n        medida: ['', Validators.required],\n        presenForm: ['', Validators.required]\n      });\n      this.myFormTiempo = this.formBuilder.group({\n        selectedHour: ['', Validators.required],\n        inicio: ['', Validators.required],\n        fin: ['', Validators.required]\n      });\n      this.myFormOtros = this.formBuilder.group({\n        peso: ['', Validators.required],\n        repisaForm: ['', Validators.required],\n        contra: ['', Validators.required],\n        comentario: ['', Validators.required]\n      });\n    }\n    goBack() {\n      this.navCtrl.back();\n    }\n    redirectToHomePage() {\n      setTimeout(() => {\n        this.router.navigate(['/tabs/tab1']); // Redirecciona a la página\n      }, 2000);\n    }\n    ngOnInit() {\n      this.getID();\n    }\n    getID() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const id = yield _this.userService.getUser();\n        _this.userId = id;\n        console.log(_this.userId);\n      })();\n    }\n    submitForm() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        if (_this2.myFormGeneral.valid && _this2.myFormTiempo.valid && _this2.myFormOtros.valid) {\n          _this2.formDataGeneral.push(_this2.myFormGeneral.value), _this2.formDataTiempo.push(_this2.myFormTiempo.value), _this2.formDataOtros.push(_this2.myFormOtros.value),\n          // Reiniciar el formulario\n          _this2.myFormGeneral.reset();\n          _this2.myFormTiempo.reset();\n          _this2.myFormOtros.reset();\n          _this2.saveMeds();\n        }\n      })();\n    }\n    isFormValidGeneral() {\n      return this.myFormGeneral.valid;\n    }\n    isFormValidTiempo() {\n      return this.myFormTiempo.valid;\n    }\n    isFormValidOtros() {\n      return this.myFormOtros.valid;\n    }\n    toggleCard() {\n      this.expanded = !this.expanded;\n    }\n    toggleCard2() {\n      this.expanded2 = !this.expanded2;\n    }\n    toggleCard3() {\n      this.expanded3 = !this.expanded3;\n    }\n    toggleCard4() {\n      this.expanded4 = !this.expanded4;\n    }\n    //Aqui empieza mi desvergue\n    savePrescription() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        yield _this3.prescriptionStorage.addPrescription(_this3.formDataTiempo[0].selectedHour, _this3.formDataTiempo[0].inicio, _this3.formDataTiempo[0].fin, _this3.userId, _this3.medId).then(res => {\n          console.log(res);\n        });\n      })();\n    }\n    saveOtherDetails() {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        yield _this4.prescriptionStorage.addMedDetails(_this4.formDataOtros[0].peso, _this4.formDataOtros[0].repisaForm, _this4.formDataOtros[0].contra, _this4.formDataOtros[0].comentario, _this4.medId).then(res => {\n          console.log(res);\n        });\n      })();\n    }\n    saveMeds() {\n      var _this5 = this;\n      return _asyncToGenerator(function* () {\n        yield _this5.prescriptionStorage.addMeds(_this5.formDataGeneral[0].name, _this5.formDataGeneral[0].dosis, _this5.formDataGeneral[0].medida, _this5.formDataGeneral[0].presenForm).then(response => {\n          console.log(response);\n          _this5.medId = response.id;\n          console.log(_this5.medId);\n          _this5.savePrescription();\n          _this5.saveOtherDetails();\n        });\n      })();\n    }\n  }\n  _AgregarPage = AgregarPage;\n  _AgregarPage.ɵfac = function AgregarPage_Factory(t) {\n    return new (t || _AgregarPage)(i0.ɵɵdirectiveInject(i1.NavController), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.PrescriptionStorageService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.Firestore), i0.ɵɵdirectiveInject(i6.UserService));\n  };\n  _AgregarPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _AgregarPage,\n    selectors: [[\"app-agregar\"]],\n    decls: 77,\n    vars: 2,\n    consts: [[\"slot\", \"start\"], [3, \"click\"], [\"slot\", \"icon-only\", \"name\", \"chevron-back\", 1, \"chevron-icon\"], [1, \"titulo\"], [1, \"nombre\"], [\"type\", \"text\", \"fill\", \"solid\", \"Placeholder\", \"Medicamento\", \"helperText\", \"Ejemplo: Paracetamol\"], [1, \"dosis\"], [\"type\", \"number\", \"fill\", \"solid\", \"Placeholder\", \"Dosis\", \"helperText\", \"Ejemplo: 1 pastilla\"], [1, \"medida\"], [\"fill\", \"solid\", \"justify\", \"space-between\", \"placeholder\", \"Seleccione\"], [1, \"presentacion\"], [\"type\", \"text\", \"fill\", \"solid\", \"placeholder\", \"Presentacion\", \"helperText\", \"Ejemplo: Caja\"], [\"fill\", \"solid\", \"justify\", \"spacwe-between\", \"placeholder\", \"Seleccione\"], [3, \"formGroup\"], [1, \"tiempo\"], [\"id\", \"selectedHour\", \"formControlName\", \"selectedHour\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"inicio\", \"formControlName\", \"inicio\", \"type\", \"date\", \"fill\", \"solid\", \"placeholder\", \"Fecha\", \"helperText\", \"Ejemplo: 01/01/2021\"], [\"id\", \"fin\", \"formControlName\", \"fin\", \"type\", \"date\", \"fill\", \"solid\", \"placeholder\", \"Fecha\", \"helperText\", \"Ejemplo: 01/01/2021\"], [3, \"value\"]],\n    template: function AgregarPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-toolbar\")(1, \"ion-buttons\", 0)(2, \"ion-button\", 1);\n        i0.ɵɵlistener(\"click\", function AgregarPage_Template_ion_button_click_2_listener() {\n          return ctx.goBack();\n        });\n        i0.ɵɵelement(3, \"ion-icon\", 2);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(4, \"div\", 3)(5, \"h2\");\n        i0.ɵɵtext(6, \"Nueva receta\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(7, \"ion-content\")(8, \"ion-button\");\n        i0.ɵɵtext(9, \" Guardar \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"swiper-container\")(11, \"swiper-slide\")(12, \"div\", 4)(13, \"ion-item\")(14, \"h4\");\n        i0.ɵɵtext(15, \"\\u00BFCual es el nombre del medicamento?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(16, \"ion-input\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 6)(18, \"ion-item\")(19, \"h4\");\n        i0.ɵɵtext(20, \"\\u00BFCual es la dosis que se va a tomar?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(21, \"ion-input\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"div\", 8)(23, \"ion-item\")(24, \"h4\");\n        i0.ɵɵtext(25, \"Unidad de medida del medicamento\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"ion-select\", 9)(27, \"ion-select-option\");\n        i0.ɵɵtext(28, \"Miligramo(s)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"ion-select-option\");\n        i0.ɵɵtext(30, \"Gramo(s)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"ion-select-option\");\n        i0.ɵɵtext(32, \"Mililitro(s)\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(33, \"div\", 10)(34, \"ion-item\")(35, \"h4\");\n        i0.ɵɵtext(36, \"\\u00BFCual es la presentacion del medicamento?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(37, \"ion-input\", 11);\n        i0.ɵɵelementStart(38, \"ion-item\")(39, \"h4\");\n        i0.ɵɵtext(40, \"Presentacion del medicamento\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"ion-select\", 12)(42, \"ion-select-option\");\n        i0.ɵɵtext(43, \"Pastilla\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"ion-select-option\");\n        i0.ɵɵtext(45, \"Capsula\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"ion-select-option\");\n        i0.ɵɵtext(47, \"Ampolleta\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(48, \"ion-select-option\");\n        i0.ɵɵtext(49, \"Solvente\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"ion-select-option\");\n        i0.ɵɵtext(51, \"Inyeccion\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(52, \"swiper-slide\")(53, \"form\", 13)(54, \"div\", 14)(55, \"ion-card\")(56, \"ion-card-header\", 1);\n        i0.ɵɵlistener(\"click\", function AgregarPage_Template_ion_card_header_click_56_listener() {\n          return ctx.toggleCard2();\n        });\n        i0.ɵɵelementStart(57, \"ion-card-title\");\n        i0.ɵɵtext(58, \"Tiempo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(59, \"ion-card-subtitle\");\n        i0.ɵɵtext(60, \"Datos como fecha de inicio, hora de inicio.\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(61, \"ion-card-content\")(62, \"ion-item\")(63, \"h2\");\n        i0.ɵɵtext(64, \"\\u00BFCada cuantas horas se va a tomar el meedicamento?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(65, \"ion-select\", 15);\n        i0.ɵɵtemplate(66, AgregarPage_ion_select_option_66_Template, 2, 2, \"ion-select-option\", 16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(67, \"ion-item\")(68, \"h2\");\n        i0.ɵɵtext(69, \"\\u00BFCual es la fecha de inicio?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(70, \"ion-input\", 17);\n        i0.ɵɵelementStart(71, \"ion-item\")(72, \"h2\");\n        i0.ɵɵtext(73, \"\\u00BFCual es la fecha de finalizacion?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(74, \"ion-input\", 18);\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(75, \"swiper-slide\");\n        i0.ɵɵtext(76, \" Slide 3 \");\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(53);\n        i0.ɵɵproperty(\"formGroup\", ctx.myFormTiempo);\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"ngForOf\", ctx.hours);\n      }\n    },\n    dependencies: [i1.IonButton, i1.IonButtons, i1.IonCard, i1.IonCardContent, i1.IonCardHeader, i1.IonCardSubtitle, i1.IonCardTitle, i1.IonContent, i1.IonIcon, i1.IonInput, i1.IonItem, i1.IonSelect, i1.IonSelectOption, i1.IonToolbar, i1.NumericValueAccessor, i1.SelectValueAccessor, i1.TextValueAccessor, i7.NgForOf, i2.ɵNgNoValidate, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName],\n    styles: [\"swiper-container[_ngcontent-%COMP%]{border-color:#0c487a;border-style:solid;border-width:2px;border-radius:30px;margin:20px}ion-toolbar[_ngcontent-%COMP%]{padding:20px 0 0;text-align:center;color:#0c487a}ion-button[_ngcontent-%COMP%]{width:80%}ion-content[_ngcontent-%COMP%]{text-align:center;justify-content:left;align-items:center}div[_ngcontent-%COMP%]{margin-bottom:20px}ion-card[_ngcontent-%COMP%]{box-shadow:none}\"]\n  });\n  return AgregarPage;\n})();\nexport { AgregarPage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}