{"ast":null,"code":"import _asyncToGenerator from \"c:/Users/benji/OneDrive/Documents/smartmeds project/smart-meds-ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { getDatabase, ref } from '@angular/fire/database';\nimport { get } from 'firebase/database';\nimport { collection, query, where, getDocs } from '@angular/fire/firestore';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/firestore\";\nimport * as i2 from \"../services/notifications.service\";\nimport * as i3 from \"@ionic/angular\";\nlet Tab3Page = /*#__PURE__*/(() => {\n  var _Tab3Page;\n  class Tab3Page {\n    toggleCard() {\n      this.expanded = !this.expanded;\n    }\n    toggleCard2() {\n      this.expanded2 = !this.expanded2;\n    }\n    toggleCard3() {\n      this.expanded3 = !this.expanded3;\n    }\n    constructor(firestore, notifications) {\n      this.firestore = firestore;\n      this.notifications = notifications;\n      this.expanded = true;\n      this.expanded2 = true;\n      this.expanded3 = true;\n      this.db = getDatabase();\n      this.reference = ref(this.db, 'Peso');\n      this.stateRef = ref(this.db, 'Puerta');\n      this.weight = 0;\n      this.state = \"Cerrada\";\n      this.dataRepisaAlta = [];\n      this.dataRepisaBaja = [];\n      this.dataRepisaMedia = [];\n      // reads data from realtime database (medkit) every 2 seconds\n      this.readTask = setInterval(() => {\n        this.readKit();\n      }, 2000);\n    }\n    ionViewDidEnter() {\n      this.readKit();\n      this.readMedicinesFromShelf('Alta');\n      this.readMedicinesFromShelf('Media');\n      this.readMedicinesFromShelf('Baja');\n      this.dataRepisaAlta = [];\n      this.dataRepisaBaja = [];\n      this.dataRepisaMedia = [];\n    }\n    // gets data from realtime database (medkit)\n    readKit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        yield get(_this.reference).then(snapshot => {\n          const value = snapshot.val();\n          _this.weight = value;\n        });\n        yield get(_this.stateRef).then(snapshot => {\n          const value = snapshot.val();\n          _this.state = value == 0 ? \"Cerrada\" : \"Abierta\";\n        });\n      })();\n    }\n    // notify() {\n    //   //this is a test notification\n    //   const hora = new Date().getHours()\n    //   this.notifications.scheduleTest(\"Peso en la hora: \" + hora, 1, \"Peso: \" + this.weight + \"g\")\n    // }\n    //aqui empieza el desvergue\n    readMedicinesFromShelf(shelf) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        try {\n          const shelfRef = collection(_this2.firestore, 'Medicaciones');\n          const q = query(shelfRef, where('Detalles.repisa', '==', shelf));\n          const querySnapshot = yield getDocs(q);\n          querySnapshot.forEach(doc => {\n            const medicineData = doc.data();\n            switch (shelf) {\n              case 'Alta':\n                _this2.dataRepisaAlta.push(medicineData);\n                break;\n              case 'Media':\n                _this2.dataRepisaMedia.push(medicineData);\n                break;\n              case 'Baja':\n                _this2.dataRepisaBaja.push(medicineData);\n                break;\n              case \"default\":\n                break;\n            }\n          });\n        } catch (error) {\n          console.error('Error getting medicines:', error);\n        }\n      })();\n    }\n  }\n  _Tab3Page = Tab3Page;\n  _Tab3Page.ɵfac = function Tab3Page_Factory(t) {\n    return new (t || _Tab3Page)(i0.ɵɵdirectiveInject(i1.Firestore), i0.ɵɵdirectiveInject(i2.NotificationsService));\n  };\n  _Tab3Page.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _Tab3Page,\n    selectors: [[\"app-tab3\"]],\n    decls: 22,\n    vars: 0,\n    consts: [[\"slot\", \"start\"], [\"name\", \"chevron-back\"], [\"lines\", \"none\"], [\"name\", \"notifications-outline\", \"slot\", \"start\"], [\"name\", \"chevron-forward\", \"slot\", \"end\"], [\"name\", \"key-outline\", \"slot\", \"start\"], [\"name\", \"person-remove-outline\", \"slot\", \"start\"]],\n    template: function Tab3Page_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-toolbar\")(1, \"ion-buttons\", 0);\n        i0.ɵɵelement(2, \"ion-icon\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"h2\");\n        i0.ɵɵtext(4, \"Configuraci\\u00F3n\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"ion-content\")(6, \"ion-list\")(7, \"ion-item\", 2);\n        i0.ɵɵelement(8, \"ion-icon\", 3);\n        i0.ɵɵelementStart(9, \"ion-label\");\n        i0.ɵɵtext(10, \"Notificaciones\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"ion-icon\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"ion-item\", 2);\n        i0.ɵɵelement(13, \"ion-icon\", 5);\n        i0.ɵɵelementStart(14, \"ion-label\");\n        i0.ɵɵtext(15, \"Contrase\\u00F1a\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"ion-icon\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"ion-item\", 2);\n        i0.ɵɵelement(18, \"ion-icon\", 6);\n        i0.ɵɵelementStart(19, \"ion-label\");\n        i0.ɵɵtext(20, \"Borrar Cuenta\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"ion-icon\", 4);\n        i0.ɵɵelementEnd()()();\n      }\n    },\n    dependencies: [i3.IonButtons, i3.IonContent, i3.IonIcon, i3.IonItem, i3.IonLabel, i3.IonList, i3.IonToolbar],\n    styles: [\"ion-toolbar[_ngcontent-%COMP%]{padding:10px;color:#005fa3}ion-icon[_ngcontent-%COMP%]{height:30px;width:30px}ion-title[_ngcontent-%COMP%]{font-size:28px}ion-list[_ngcontent-%COMP%]{margin-top:20px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{box-shadow:0 5px 6px #0003;margin:10px;font-size:18px;border-radius:50px;border-style:solid;border-color:#005fa3}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px;color:#005fa3}.footer-text[_ngcontent-%COMP%]{text-align:center;margin-top:100px}.footer-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;color:#005fa3;text-align:center}h2[_ngcontent-%COMP%]{font-size:28px;color:#005fa3;text-align:center}\"]\n  });\n  return Tab3Page;\n})();\nexport { Tab3Page };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}