{"ast":null,"code":"import _asyncToGenerator from \"c:/Users/benji/OneDrive/Documents/smartmeds project/smart-meds-ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { getFirestore } from '@angular/fire/firestore';\nimport { register } from 'swiper/element';\nregister();\nlet AgregarPage = class AgregarPage {\n  constructor(navCtrl, formBuilder, prescriptionStorage, router, firestore, userService) {\n    this.navCtrl = navCtrl;\n    this.formBuilder = formBuilder;\n    this.prescriptionStorage = prescriptionStorage;\n    this.router = router;\n    this.firestore = firestore;\n    this.userService = userService;\n    this.formDataGeneral = [];\n    this.formDataTiempo = [];\n    this.formDataOtros = [];\n    this.db = getFirestore();\n    //User ID\n    this.userId = \"\";\n    //Medicine ID\n    this.medId = \"\";\n    //userData = {\n    //name: \"\",\n    //email: \"\",\n    //}\n    this.expanded = false;\n    this.expanded2 = false;\n    this.expanded3 = false;\n    this.expanded4 = false;\n    this.hours = Array.from({\n      length: 24\n    }, (_, i) => i);\n    this.expanded = true, this.expanded2 = true, this.expanded3 = true, this.expanded4 = true, this.myFormGeneral = this.formBuilder.group({\n      name: ['', Validators.required],\n      dosis: ['', Validators.required],\n      medida: ['', Validators.required],\n      presenForm: ['', Validators.required]\n    });\n    this.myFormTiempo = this.formBuilder.group({\n      selectedHour: ['', Validators.required],\n      inicio: ['', Validators.required],\n      fin: ['', Validators.required]\n    });\n    this.myFormOtros = this.formBuilder.group({\n      peso: ['', Validators.required],\n      repisaForm: ['', Validators.required],\n      contra: ['', Validators.required],\n      comentario: ['', Validators.required]\n    });\n  }\n  goBack() {\n    this.navCtrl.back();\n  }\n  redirectToHomePage() {\n    setTimeout(() => {\n      this.router.navigate(['/tabs/tab1']); // Redirecciona a la pÃ¡gina\n    }, 2000);\n  }\n  ngOnInit() {\n    this.getID();\n  }\n  getID() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const id = yield _this.userService.getUser();\n      _this.userId = id;\n      console.log(_this.userId);\n    })();\n  }\n  submitForm() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      if (_this2.myFormGeneral.valid && _this2.myFormTiempo.valid && _this2.myFormOtros.valid) {\n        _this2.formDataGeneral.push(_this2.myFormGeneral.value), _this2.formDataTiempo.push(_this2.myFormTiempo.value), _this2.formDataOtros.push(_this2.myFormOtros.value),\n        // Reiniciar el formulario\n        _this2.myFormGeneral.reset();\n        _this2.myFormTiempo.reset();\n        _this2.myFormOtros.reset();\n        _this2.saveMeds();\n      }\n    })();\n  }\n  isFormValidGeneral() {\n    return this.myFormGeneral.valid;\n  }\n  isFormValidTiempo() {\n    return this.myFormTiempo.valid;\n  }\n  isFormValidOtros() {\n    return this.myFormOtros.valid;\n  }\n  toggleCard() {\n    this.expanded = !this.expanded;\n  }\n  toggleCard2() {\n    this.expanded2 = !this.expanded2;\n  }\n  toggleCard3() {\n    this.expanded3 = !this.expanded3;\n  }\n  toggleCard4() {\n    this.expanded4 = !this.expanded4;\n  }\n  //Aqui empieza mi desvergue\n  savePrescription() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      yield _this3.prescriptionStorage.addPrescription(_this3.formDataTiempo[0].selectedHour, _this3.formDataTiempo[0].inicio, _this3.formDataTiempo[0].fin, _this3.userId, _this3.medId).then(res => {\n        console.log(res);\n      });\n    })();\n  }\n  saveOtherDetails() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      yield _this4.prescriptionStorage.addMedDetails(_this4.formDataOtros[0].peso, _this4.formDataOtros[0].repisaForm, _this4.formDataOtros[0].contra, _this4.formDataOtros[0].comentario, _this4.medId).then(res => {\n        console.log(res);\n      });\n    })();\n  }\n  saveMeds() {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      yield _this5.prescriptionStorage.addMeds(_this5.formDataGeneral[0].name, _this5.formDataGeneral[0].dosis, _this5.formDataGeneral[0].medida, _this5.formDataGeneral[0].presenForm).then(response => {\n        console.log(response);\n        _this5.medId = response.id;\n        console.log(_this5.medId);\n        _this5.savePrescription();\n        _this5.saveOtherDetails();\n      });\n    })();\n  }\n};\nAgregarPage = __decorate([Component({\n  selector: 'app-agregar',\n  templateUrl: './agregar.page.html',\n  styleUrls: ['./agregar.page.scss']\n})], AgregarPage);\nexport { AgregarPage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}