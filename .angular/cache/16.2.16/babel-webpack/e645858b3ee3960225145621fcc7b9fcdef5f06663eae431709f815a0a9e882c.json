{"ast":null,"code":"import _asyncToGenerator from \"c:/Users/benji/OneDrive/Documents/smartmeds project/smart-meds-ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Validators } from '@angular/forms';\nimport { getFirestore } from '@angular/fire/firestore';\nimport { register } from 'swiper/element';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../services/prescription-storage.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/fire/firestore\";\nimport * as i6 from \"../services/user.service\";\nimport * as i7 from \"@angular/common\";\nfunction AgregarPage_ion_select_option_65_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-select-option\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const hour_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", hour_r1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(hour_r1 + 1);\n  }\n}\nregister();\nlet AgregarPage = /*#__PURE__*/(() => {\n  var _AgregarPage;\n  class AgregarPage {\n    constructor(navCtrl, formBuilder, prescriptionStorage, router, firestore, userService) {\n      this.navCtrl = navCtrl;\n      this.formBuilder = formBuilder;\n      this.prescriptionStorage = prescriptionStorage;\n      this.router = router;\n      this.firestore = firestore;\n      this.userService = userService;\n      this.formDataGeneral = [];\n      this.formDataTiempo = [];\n      this.formDataOtros = [];\n      this.db = getFirestore();\n      //User ID\n      this.userId = \"\";\n      //Medicine ID\n      this.medId = \"\";\n      //userData = {\n      //name: \"\",\n      //email: \"\",\n      //}\n      this.expanded = false;\n      this.expanded2 = false;\n      this.expanded3 = false;\n      this.expanded4 = false;\n      this.hours = Array.from({\n        length: 24\n      }, (_, i) => i);\n      this.expanded = true, this.expanded2 = true, this.expanded3 = true, this.expanded4 = true, this.myFormGeneral = this.formBuilder.group({\n        name: ['', Validators.required],\n        dosis: ['', Validators.required],\n        medida: ['', Validators.required],\n        presenForm: ['', Validators.required]\n      });\n      this.myFormTiempo = this.formBuilder.group({\n        selectedHour: ['', Validators.required],\n        inicio: ['', Validators.required],\n        fin: ['', Validators.required]\n      });\n      this.myFormOtros = this.formBuilder.group({\n        peso: ['', Validators.required],\n        repisaForm: ['', Validators.required],\n        contra: ['', Validators.required],\n        comentario: ['', Validators.required]\n      });\n    }\n    goBack() {\n      this.navCtrl.back();\n    }\n    redirectToHomePage() {\n      setTimeout(() => {\n        this.router.navigate(['/tabs/tab1']); // Redirecciona a la página \"home\"\n      }, 2000);\n    }\n    ngOnInit() {\n      this.getID();\n    }\n    getID() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const id = yield _this.userService.getUser();\n        _this.userId = id;\n        console.log(_this.userId);\n      })();\n    }\n    submitForm() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        if (_this2.myFormGeneral.valid && _this2.myFormTiempo.valid && _this2.myFormOtros.valid) {\n          _this2.formDataGeneral.push(_this2.myFormGeneral.value), _this2.formDataTiempo.push(_this2.myFormTiempo.value), _this2.formDataOtros.push(_this2.myFormOtros.value),\n          // Reiniciar el formulario\n          _this2.myFormGeneral.reset();\n          _this2.myFormTiempo.reset();\n          _this2.myFormOtros.reset();\n          _this2.saveMeds();\n          console.log(\"formulado enviado\");\n        }\n      })();\n    }\n    isFormValidGeneral() {\n      return this.myFormGeneral.valid;\n    }\n    isFormValidTiempo() {\n      return this.myFormTiempo.valid;\n    }\n    isFormValidOtros() {\n      return this.myFormOtros.valid;\n    }\n    toggleCard() {\n      this.expanded = !this.expanded;\n    }\n    toggleCard2() {\n      this.expanded2 = !this.expanded2;\n    }\n    toggleCard3() {\n      this.expanded3 = !this.expanded3;\n    }\n    toggleCard4() {\n      this.expanded4 = !this.expanded4;\n    }\n    //Aqui empieza mi desvergue\n    savePrescription() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        yield _this3.prescriptionStorage.addPrescription(_this3.formDataTiempo[0].selectedHour, _this3.formDataTiempo[0].inicio, _this3.formDataTiempo[0].fin, _this3.userId, _this3.medId).then(res => {\n          console.log(res);\n        });\n      })();\n    }\n    saveOtherDetails() {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        yield _this4.prescriptionStorage.addMedDetails(_this4.formDataOtros[0].peso, _this4.formDataOtros[0].repisaForm, _this4.formDataOtros[0].contra, _this4.formDataOtros[0].comentario, _this4.medId).then(res => {\n          console.log(res);\n        });\n      })();\n    }\n    saveMeds() {\n      var _this5 = this;\n      return _asyncToGenerator(function* () {\n        yield _this5.prescriptionStorage.addMeds(_this5.formDataGeneral[0].name, _this5.formDataGeneral[0].dosis, _this5.formDataGeneral[0].medida, _this5.formDataGeneral[0].presenForm).then(response => {\n          console.log(response);\n          _this5.medId = response.id;\n          console.log(_this5.medId);\n          _this5.savePrescription();\n          _this5.saveOtherDetails();\n        });\n      })();\n    }\n  }\n  _AgregarPage = AgregarPage;\n  _AgregarPage.ɵfac = function AgregarPage_Factory(t) {\n    return new (t || _AgregarPage)(i0.ɵɵdirectiveInject(i1.NavController), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.PrescriptionStorageService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.Firestore), i0.ɵɵdirectiveInject(i6.UserService));\n  };\n  _AgregarPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _AgregarPage,\n    selectors: [[\"app-agregar\"]],\n    decls: 103,\n    vars: 5,\n    consts: [[\"slot\", \"start\", 3, \"click\"], [\"slot\", \"icon-only\", \"name\", \"chevron-back\", 1, \"chevron-icon\"], [1, \"titulo\"], [2, \"display\", \"block\", \"margin\", \"0 auto\", 3, \"enable\", \"click\"], [3, \"formGroup\"], [1, \"nombre\"], [\"id\", \"name\", \"type\", \"text\", \"fill\", \"solid\", \"Placeholder\", \"Medicamento\", \"helperText\", \"Ejemplo: Paracetamol\"], [1, \"dosis\"], [\"id\", \"dosis\", \"type\", \"number\", \"fill\", \"solid\", \"Placeholder\", \"Dosis\", \"helperText\", \"Ejemplo: 1 pastilla\"], [1, \"medida\"], [\"id\", \"medida\", \"fill\", \"solid\", \"justify\", \"space-between\", \"placeholder\", \"Seleccione\"], [1, \"presentacion\"], [\"type\", \"text\", \"fill\", \"solid\", \"placeholder\", \"Presentacion\", \"helperText\", \"Ejemplo: Caja\"], [\"id\", \"presenForm\", \"fill\", \"solid\", \"justify\", \"spacwe-between\", \"placeholder\", \"Seleccione\"], [1, \"tiempo\"], [\"id\", \"selectedHour\", \"formControlName\", \"selectedHour\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"inicio\", \"formControlName\", \"inicio\", \"type\", \"date\", \"fill\", \"solid\", \"placeholder\", \"Fecha\", \"helperText\", \"Ejemplo: 01/01/2021\"], [\"id\", \"fin\", \"formControlName\", \"fin\", \"type\", \"date\", \"fill\", \"solid\", \"placeholder\", \"Fecha\", \"helperText\", \"Ejemplo: 01/01/2021\"], [1, \"consumo\"], [\"id\", \"peso\", \"formControlName\", \"peso\", \"type\", \"number\", \"fill\", \"solid\", \"placeholder\", \"Gramos\", \"helperText\", \"Ejemplo: 10 gramos\"], [\"id\", \"repisaForm\", \"formControlName\", \"repisaForm\", \"placeholder\", \"Seleccione\"], [\"id\", \"contra\", \"formControlName\", \"contra\", \"type\", \"text\", \"fill\", \"solid\", \"helperText\", \"Ejemplo: No tomar a x hora\"], [\"id\", \"comentario\", \"formControlName\", \"comentario\", \"type\", \"text\", \"fill\", \"solid\", \"helperText\", \"Ejemplo: Tomar despues de comer\"], [3, \"value\"]],\n    template: function AgregarPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-toolbar\")(1, \"ion-buttons\", 0);\n        i0.ɵɵlistener(\"click\", function AgregarPage_Template_ion_buttons_click_1_listener() {\n          return ctx.goBack();\n        });\n        i0.ɵɵelement(2, \"ion-icon\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"h2\");\n        i0.ɵɵtext(5, \"Nueva receta\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"ion-button\", 3);\n        i0.ɵɵlistener(\"click\", function AgregarPage_Template_ion_button_click_6_listener() {\n          return ctx.redirectToHomePage;\n        })(\"click\", function AgregarPage_Template_ion_button_click_6_listener() {\n          return ctx.submitForm();\n        });\n        i0.ɵɵtext(7, \"Agregar\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"ion-content\")(9, \"swiper-container\")(10, \"swiper-slide\")(11, \"form\", 4)(12, \"div\", 5)(13, \"h2\");\n        i0.ɵɵtext(14, \"Datos generales\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"p\");\n        i0.ɵɵtext(16, \"Datos como nombre, dosis, caracteristicas.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"ion-item\")(18, \"h5\");\n        i0.ɵɵtext(19, \"\\u00BFCual es el nombre del medicamento?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(20, \"ion-input\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\", 7)(22, \"ion-item\")(23, \"h5\");\n        i0.ɵɵtext(24, \"\\u00BFCual es la dosis que se va a tomar?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(25, \"ion-input\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\", 9)(27, \"ion-item\")(28, \"h5\");\n        i0.ɵɵtext(29, \"Unidad de medida del medicamento\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"ion-select\", 10)(31, \"ion-select-option\");\n        i0.ɵɵtext(32, \"Miligramo(s)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"ion-select-option\");\n        i0.ɵɵtext(34, \"Gramo(s)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"ion-select-option\");\n        i0.ɵɵtext(36, \"Mililitro(s)\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(37, \"div\", 11)(38, \"ion-item\")(39, \"h5\");\n        i0.ɵɵtext(40, \"\\u00BFCual es la presentacion del medicamento?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(41, \"ion-label\", 12);\n        i0.ɵɵelementStart(42, \"ion-item\")(43, \"ion-select\", 13)(44, \"ion-select-option\");\n        i0.ɵɵtext(45, \"Pastilla\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"ion-select-option\");\n        i0.ɵɵtext(47, \"Capsula\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(48, \"ion-select-option\");\n        i0.ɵɵtext(49, \"Ampolleta\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"ion-select-option\");\n        i0.ɵɵtext(51, \"Solvente\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(52, \"ion-select-option\");\n        i0.ɵɵtext(53, \"Inyeccion\");\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(54, \"swiper-slide\")(55, \"form\", 4)(56, \"div\", 14)(57, \"h2\");\n        i0.ɵɵtext(58, \"Tiempo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(59, \"p\");\n        i0.ɵɵtext(60, \"Datos como fecha de inicio, hora de inicio.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(61, \"ion-item\")(62, \"h5\");\n        i0.ɵɵtext(63, \"\\u00BFCada cuantas horas se va a tomar el medicamento?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(64, \"ion-select\", 15);\n        i0.ɵɵtemplate(65, AgregarPage_ion_select_option_65_Template, 2, 2, \"ion-select-option\", 16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(66, \"ion-item\")(67, \"h5\");\n        i0.ɵɵtext(68, \"\\u00BFCual es la fecha de inicio?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(69, \"ion-input\", 17);\n        i0.ɵɵelementStart(70, \"ion-item\")(71, \"h5\");\n        i0.ɵɵtext(72, \"\\u00BFCual es la fecha de finalizacion?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(73, \"ion-input\", 18);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(74, \"swiper-slide\")(75, \"form\", 4)(76, \"div\", 19)(77, \"h2\");\n        i0.ɵɵtext(78, \"Datos de consumo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(79, \"p\");\n        i0.ɵɵtext(80, \"Datos como cantidad, unidad de medida, comentarios.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(81, \"ion-item\")(82, \"h5\");\n        i0.ɵɵtext(83, \"\\u00BFCual es el peso neto del envase?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(84, \"ion-input\", 20);\n        i0.ɵɵelementStart(85, \"ion-item\")(86, \"h5\");\n        i0.ɵɵtext(87, \"\\u00BFEn qu\\u00E9 repisa del botiqu\\u00EDn estar\\u00E1 este medicamento?\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(88, \"ion-select\", 21)(89, \"ion-select-option\");\n        i0.ɵɵtext(90, \"Alta\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(91, \"ion-select-option\");\n        i0.ɵɵtext(92, \"Media\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(93, \"ion-select-option\");\n        i0.ɵɵtext(94, \"Baja\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(95, \"ion-item\")(96, \"h5\");\n        i0.ɵɵtext(97, \"Contra indicaciones del medicamento\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(98, \"ion-input\", 22);\n        i0.ɵɵelementStart(99, \"ion-item\")(100, \"h5\");\n        i0.ɵɵtext(101, \"Comentarios del tratamiento\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(102, \"ion-input\", 23);\n        i0.ɵɵelementEnd()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"enable\", !ctx.isFormValidGeneral());\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"formGroup\", ctx.myFormGeneral);\n        i0.ɵɵadvance(44);\n        i0.ɵɵproperty(\"formGroup\", ctx.myFormTiempo);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngForOf\", ctx.hours);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"formGroup\", ctx.myFormOtros);\n      }\n    },\n    dependencies: [i1.IonButton, i1.IonButtons, i1.IonContent, i1.IonIcon, i1.IonInput, i1.IonItem, i1.IonLabel, i1.IonSelect, i1.IonSelectOption, i1.IonToolbar, i1.NumericValueAccessor, i1.SelectValueAccessor, i1.TextValueAccessor, i7.NgForOf, i2.ɵNgNoValidate, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName],\n    styles: [\"swiper-container[_ngcontent-%COMP%]{border-color:#0c487a;border-style:solid;border-width:2px;border-radius:30px;padding:20px;margin:20px}ion-toolbar[_ngcontent-%COMP%]{text-align:center;color:#0c487a}ion-button[_ngcontent-%COMP%]{width:80%}ion-content[_ngcontent-%COMP%]{text-align:center;justify-content:left;align-items:center}div[_ngcontent-%COMP%]{margin-bottom:20px}ion-card[_ngcontent-%COMP%]{box-shadow:none;margin:-10px}\"]\n  });\n  return AgregarPage;\n})();\nexport { AgregarPage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}