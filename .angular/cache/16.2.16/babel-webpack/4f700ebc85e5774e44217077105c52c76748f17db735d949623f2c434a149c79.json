{"ast":null,"code":"import _asyncToGenerator from \"c:/Users/benji/OneDrive/Documents/smartmeds project/smart-meds-ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { collection, addDoc } from '@angular/fire/firestore';\nimport { Toast } from '@capacitor/toast';\nlet LoginPage = class LoginPage {\n  constructor(UserService, router, firestore, check) {\n    this.UserService = UserService;\n    this.router = router;\n    this.firestore = firestore;\n    this.check = check;\n    this.showemailError = /*#__PURE__*/_asyncToGenerator(function* () {\n      yield Toast.show({\n        text: 'Correo invalido'\n      });\n    });\n    this.showpaswordError = /*#__PURE__*/_asyncToGenerator(function* () {\n      yield Toast.show({\n        text: 'Contraseña invalida'\n      });\n    });\n    this.showemailUse = /*#__PURE__*/_asyncToGenerator(function* () {\n      yield Toast.show({\n        text: 'Correo ya en uso'\n      });\n    });\n    this.showloginError = /*#__PURE__*/_asyncToGenerator(function* () {\n      yield Toast.show({\n        text: 'Usuario o contraseña incorrectos'\n      });\n    });\n    this.showDataError = /*#__PURE__*/_asyncToGenerator(function* () {\n      yield Toast.show({\n        text: 'Datos incompletos'\n      });\n    });\n    this.show = true;\n    this.selectedTab = 'tab1';\n    this.userData = {\n      name: \"\",\n      email: \"\",\n      phone: \"\",\n      lastname: \"\"\n    };\n    this.login = {\n      email: \"\",\n      pass: \"\"\n    };\n    this.register = {\n      name: \"\",\n      email: \"\",\n      pass: \"\"\n    };\n  }\n  ngOnInit() {}\n  registerUser(email, password) {\n    console.log(email, password);\n    this.UserService.register({\n      email,\n      password\n    }).then(response => {\n      console.log(\"Success Register!\");\n      this.check.setLogin(email, password);\n      if (response) {\n        console.log(response.user.uid);\n        this.show = false;\n        this.uid = response.user.uid;\n        //boton de carga pls!!!\n      } else {\n        console.log(\"Error Register!\");\n      }\n    }).catch(err => {\n      console.log(err);\n      if (err.code == \"auth/email-already-in-use\") {\n        this.loginUser(email, password);\n        this.showemailUse();\n      }\n      if (err.code == \"auth/invalid-email\") {\n        console.log(\"Invalid Email\");\n        this.showemailError();\n      }\n      if (err.code == \"auth/weak-password\") {\n        console.log(\"Weak Password\");\n        this.showpaswordError();\n      }\n    });\n  }\n  loginUser(email, password) {\n    this.UserService.login({\n      email,\n      password\n    }).then(response => {\n      console.log(\"Success Login!\");\n      this.check.setLogin(email, password);\n      if (response) {\n        console.log(response);\n        this.router.navigate(['/tabs']);\n        this.UserService.store(email);\n      } else {\n        console.log(\"Error Login!\");\n        //aviso de error \n      }\n    }).catch(err => {\n      console.log(err);\n      this.showloginError();\n    });\n  }\n  saveUserData(name, lastname, phone, email) {\n    if (name == \"\" || lastname == \"\" || phone == \"\" || email == \"\") {\n      this.showDataError();\n      return;\n    } else {\n      const loginid = this.uid;\n      const ProfilePic = \"imagen_2023-07-10_140810894.png\";\n      const dbref = collection(this.firestore, 'Users');\n      addDoc(dbref, {\n        name,\n        lastname,\n        phone,\n        email,\n        loginid,\n        ProfilePic\n      }).then(response => {\n        console.log(\"Success!\");\n        console.log(response);\n        this.router.navigate(['/tabs']);\n        //crear una tab de transición en el futuro\n      }).catch(err => {\n        console.log(err);\n        //DEBEMOS HACER VALIDACIONES DE LOS DATOS\n      });\n\n      this.UserService.store(email);\n    }\n  }\n};\nLoginPage = __decorate([Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss']\n})], LoginPage);\nexport { LoginPage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}